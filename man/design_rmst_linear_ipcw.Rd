% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/linear_ipcw.R
\name{design_rmst_linear_ipcw}
\alias{design_rmst_linear_ipcw}
\title{Analyze Power/Sample Size using a Simple Linear RMST Model}
\usage{
design_rmst_linear_ipcw(
  pilot_data,
  time_var,
  status_var,
  arm_var,
  sample_sizes = NULL,
  target_powers = NULL,
  linear_terms = NULL,
  tau,
  n_sim = 1000,
  alpha = 0.05,
  parallel.cores = 1,
  patience = 5,
  n_start = 50,
  n_step = 25,
  max_n_per_arm = 2000
)
}
\arguments{
\item{pilot_data}{A data.frame with pilot study data.}

\item{time_var, status_var, arm_var}{Strings for column names.}

\item{sample_sizes}{Optional vector of sample sizes per arm.}

\item{target_powers}{Optional vector of target powers.}

\item{linear_terms}{Optional vector of covariates for the linear model. If NULL,
defaults to all other columns in \code{pilot_data}.}

\item{tau}{The truncation time for RMST.}

\item{n_sim}{Number of bootstrap simulations.}

\item{alpha}{The significance level.}

\item{parallel.cores}{Number of cores for parallel processing. Default is 1 (no parallel).}

\item{patience}{Number of consecutive non-improving steps in the sample size
search before terminating that search. Default is 5.}

\item{...}{Additional arguments for sample size search (n_start, n_step, etc.).}
}
\value{
A list containing \code{results_data}, \code{results_plot}, and \code{results_summary}.
}
\description{
Performs power or sample size analysis based on the direct
linear regression model for RMST (Tian et al., 2014). This method is
best suited for studies where censoring can be assumed to be independent
of covariates.
}
\note{
\code{status_var} should be \code{1} for an event, \code{0} for censored. \code{arm_var}
should be \code{1} for treatment, \code{0} for control.
}
\examples{
# Create a small pilot dataset for the example
pilot_data_linear <- data.frame(
  event_time = rexp(100, rate = 0.1),
  event_status = rbinom(100, 1, 0.7),
  treatment_arm = rep(0:1, each = 50),
  age = rnorm(100, 50, 10)
)

# --- Power Calculation Example ---
# Fast-running example for CRAN checks
results_power <- design_rmst_linear_ipcw(
  pilot_data = pilot_data_linear,
  time_var = "event_time",
  status_var = "event_status",
  arm_var = "treatment_arm",
  sample_sizes = c(50, 100),
  tau = 10,
  n_sim = 10 # Low n_sim for example speed
)

\donttest{
# --- Sample Size Calculation with Parallel Processing ---
# This example is more intensive and demonstrates parallel computing.
# It will not be run on CRAN.
results_n <- design_rmst_linear_ipcw(
  pilot_data = pilot_data_linear,
  time_var = "event_time",
  status_var = "event_status",
  arm_var = "treatment_arm",
  target_powers = c(0.80),
  tau = 10,
  n_sim = 100,
  parallel.cores = 2 # Use 2 cores
)
}

}
\references{
Tian, L., et al. (2014). \emph{Biostatistics}, 15(2), 222-233.
}
