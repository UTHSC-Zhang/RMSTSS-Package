% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rmst_dp.R
\name{calculate_dp_power}
\alias{calculate_dp_power}
\title{Calculate Power for Dynamic Prediction Model}
\usage{
calculate_dp_power(
  n_per_group,
  L,
  K,
  interval,
  base_rate_survival,
  group_effect_Za,
  Zb_effect,
  censoring_rate,
  treatment_rate,
  dp_method = c("link", "stratified"),
  dp_link = c("linear", "log"),
  dp_stratified = c("add", "multi"),
  dp_weights = c("stabilized", "unstabilized"),
  alpha = 0.05,
  n_sim = 1000
)
}
\arguments{
\item{n_per_group}{Numeric, the number of subjects in each binary group.}

\item{L}{Numeric, the restriction time for RMST.}

\item{K}{Integer, the number of cross-sections.}

\item{interval}{Numeric, the time interval between consecutive cross-sections.}

\item{base_rate_survival}{Numeric, baseline hazard rate for survival events in simulation.}

\item{group_effect_Za}{Numeric, the log-hazard ratio (or linear effect) for \code{Za} (group effect)
on survival under the alternative hypothesis. This is the effect size to detect.
e.g., \code{log(0.8)} for Group 1 having 0.8 times the hazard of Group 0.}

\item{Zb_effect}{Numeric, the log-hazard ratio (or linear effect) for \code{Zb} on survival in simulation.}

\item{censoring_rate}{Numeric, baseline hazard rate for censoring in simulation.}

\item{treatment_rate}{Numeric, baseline hazard rate for treatment assignment in simulation.}

\item{dp_method}{Character, \code{method} argument for \code{dp} function ("link" or "stratified").}

\item{dp_link}{Character, \code{link} argument for \code{dp} function ("linear" or "log").}

\item{dp_stratified}{Character, \code{stratified} argument for \code{dp} function ("add" or "multi").}

\item{dp_weights}{Character, \code{weights} argument for \code{dp} function ("stabilized" or "unstabilized").}

\item{alpha}{Numeric, significance level for the hypothesis test (default: 0.05).}

\item{n_sim}{Integer, number of Monte Carlo simulations to run (default: 1000).}
}
\value{
A numeric value representing the estimated power of the test (proportion of rejected
null hypotheses), or \code{NA} if all simulations failed.
}
\description{
This function calculates the statistical power of a test for the group effect (\code{Za})
within a dynamic prediction model using Monte Carlo simulation.
}
\examples{
# Example: Calculate power for a specific dynamic prediction scenario
set.seed(456)
power_result_dp <- calculate_dp_power(
  n_per_group = 75,
  L = 10, K = 2, interval = 5,
  base_rate_survival = 0.1, group_effect_Za = log(0.7), # Detect 30\% reduction in hazard for Group 1
  Zb_effect = 0.1, censoring_rate = 0.03, treatment_rate = 0.04,
  dp_method = "link", dp_link = "linear", dp_stratified = "add", # stratified is ignored if method="link"
  dp_weights = "stabilized",
  alpha = 0.05, n_sim = 50 # Reduced n_sim for quick example
)
# print(paste("Estimated DP Power:", round(power_result_dp, 4)))
}
