% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rmst_dp.R
\name{calculate_dp_sample_size}
\alias{calculate_dp_sample_size}
\title{Calculate Sample Size for Dynamic Prediction Model}
\usage{
calculate_dp_sample_size(
  target_power,
  L,
  K,
  interval,
  base_rate_survival,
  group_effect_Za,
  Zb_effect,
  censoring_rate,
  treatment_rate,
  dp_method = c("link", "stratified"),
  dp_link = c("linear", "log"),
  dp_stratified = c("add", "multi"),
  dp_weights = c("stabilized", "unstabilized"),
  alpha = 0.05,
  n_sim_per_iter = 100,
  tol = 0.01,
  max_iter = 50
)
}
\arguments{
\item{target_power}{Numeric, the desired statistical power (e.g., 0.8).}

\item{L}{Numeric, the restriction time for RMST.}

\item{K}{Integer, the number of cross-sections.}

\item{interval}{Numeric, the time interval between consecutive cross-sections.}

\item{base_rate_survival}{Numeric, baseline hazard rate for survival events in simulation.}

\item{group_effect_Za}{Numeric, the log-hazard ratio (or linear effect) for \code{Za} (group effect)
on survival under the alternative hypothesis. This is the effect size to detect.}

\item{Zb_effect}{Numeric, the log-hazard ratio (or linear effect) for \code{Zb} on survival in simulation.}

\item{censoring_rate}{Numeric, baseline hazard rate for censoring in simulation.}

\item{treatment_rate}{Numeric, baseline hazard rate for treatment assignment in simulation.}

\item{dp_method}{Character, \code{method} argument for \code{dp} function ("link" or "stratified").}

\item{dp_link}{Character, \code{link} argument for \code{dp} function ("linear" or "log").}

\item{dp_stratified}{Character, \code{stratified} argument for \code{dp} function ("add" or "multi").}

\item{dp_weights}{Character, \code{weights} argument for \code{dp} function ("stabilized" or "unstabilized").}

\item{alpha}{Numeric, significance level for the hypothesis test (default: 0.05).}

\item{n_sim_per_iter}{Integer, number of Monte Carlo simulations per iteration of sample size search (default: 100).}

\item{tol}{Numeric, tolerance for power difference (default: 0.01).}

\item{max_iter}{Integer, maximum iterations for sample size search (default: 50).}
}
\value{
An integer representing the estimated required sample size per group, or \code{NA} if a solution is not found.
}
\description{
This function estimates the required sample size (per group) for a desired power
to detect a specified group effect within a dynamic prediction model.
It uses an iterative search approach.
}
\examples{
# Example: Estimate sample size for 80\% power
set.seed(789)
sample_size_dp <- calculate_dp_sample_size(
  target_power = 0.8,
  L = 10, K = 2, interval = 5,
  base_rate_survival = 0.1, group_effect_Za = log(0.7),
  Zb_effect = 0.1, censoring_rate = 0.03, treatment_rate = 0.04,
  dp_method = "link", dp_link = "linear", dp_stratified = "add",
  dp_weights = "stabilized",
  alpha = 0.05, n_sim_per_iter = 30, # Reduced n_sim for quick example
  max_iter = 10
)
# print(paste("Estimated DP Sample Size per group:", sample_size_dp))
}
